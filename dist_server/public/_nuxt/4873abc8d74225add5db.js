(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{315:function(t,i,e){var n=e(356);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),(0,e(12).default)("61d59f78",n,!0,{sourceMap:!1})},355:function(t,i,e){"use strict";var n=e(315);e.n(n).a},356:function(t,i,e){(i=e(11)(!1)).push([t.i,"#globeComponentContainer{height:100%;width:100%}",""]),t.exports=i},361:function(t,i,e){"use strict";e.r(i),e(10),e(6),e(8),e(27),e(351),e(5),e(4),e(44);var n=e(18),a=(e(74),e(26)),o=e(2),s=e(66),r=e(357),c=e(358);function h(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}var u={data:function(){return{worldMapData:{land:void 0,countries:void 0},covidData:{countriesLatestConfirmed:void 0,global:void 0,display:{type:void 0,countryToCountMap:void 0,minCount:void 0,maxCount:void 0}},isInitialDataFetched:!1,canvas:void 0,context:void 0,equirectangularCanvas:void 0,equirectangularContext:void 0,colorKeyToCountryMap:{},isMounted:!1,dimensions:{screenWidth:void 0,screenHeight:void 0,canvasSquareSide:void 0,canvasMargin:50},scale:void 0,rotations:{yaw:0,pitch:-10,roll:0},colors:{landRed:"225",unavailableCountry:"#8F8D8D",selectedCountry:"#F2E4E4",water:"#5CA8BF"},autoRotationDegPerSec:5,isRotating:!1,drawLoop:void 0,lastDrawLoopCallTime:void 0,isBeingDrawn:!1,selectedCountry:void 0,lastPinchDistance:void 0,dragSensitivity:75,pinchZoomSensitivity:.08,isBeingDragged:!1,nextUniqueColorSeed:1}},computed:function(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?h(Object(e),!0).forEach((function(i){Object(o.a)(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):h(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}({},Object(s.c)({url:"urls/url"}),{width:{get:function(){return this.dimensions.canvasSquareSide}},height:{get:function(){return this.dimensions.canvasSquareSide}},radius:{get:function(){return this.dimensions.canvasSquareSide/2}},projection:{get:function(){return r.e().translate([this.width/2,this.height/2]).clipAngle(90).precision(.1)}},graticule:{get:function(){return r.d()}},path:{get:function(){if(this.isMounted)return r.f(this.projection,this.context)}},equirectangularProjection:{get:function(){return r.c().translate([this.width/2,this.height/2]).scale(this.width/7)}},equirectangularPath:{get:function(){if(this.isMounted)return r.f(this.equirectangularProjection,this.equirectangularContext)}},autoRotationDegPerMilliSec:{get:function(){return this.autoRotationDegPerSec/1e3}},countryColorScale:{get:function(){return r.i().domain([this.covidData.display.maxCount,2e3,0]).range([0,190])}}}),watch:{isInitialDataFetched:function(){this.isInitialDataFetched&&this.setupEquirectangularColorKeys()},width:function(){this.isMounted&&(this.canvas.attr("width",this.width),this.equirectangularCanvas.attr("width",this.width),this.setupEquirectangularColorKeys())},height:function(){this.isMounted&&(this.canvas.attr("height",this.height),this.equirectangularCanvas.attr("height",this.height),this.setupEquirectangularColorKeys())},radius:function(){this.scale=this.radius},scale:function(){this.projection.scale(this.scale)},rotations:function(){this.projection.rotate([this.rotations.yaw,this.rotations.pitch,this.rotations.roll])}},beforeMount:function(){window.addEventListener("resize",this.adjustDimensions)},beforeDestroy:function(){window.removeEventListener("resize",this.adjustDimensions)},mounted:function(){this.adjustDimensions(),this.canvas=r.j("#canvasContainer").append("canvas").attr("id","canvas").attr("width",this.width).attr("height",this.height),this.equirectangularCanvas=r.j("#canvasContainer").append("canvas").attr("width",this.width).attr("height",this.height),this.context=this.canvas.node().getContext("2d"),this.equirectangularContext=this.equirectangularCanvas.node().getContext("2d"),this.isMounted=!0,this.equirectangularCanvas.remove(),this.configureInitialProjection(),this.canvas.on("mousemove",this.onMouseMove).call(r.a().on("start",this.onDragStart).on("drag",this.onDrag).on("end",this.onDragEnd)).call(r.m().on("zoom",this.onZoom)),this.isRotating=!0,this.lastDrawLoopCallTime=r.h(),this.drawLoop=r.k(this.draw),this.fetchInitialData()},methods:{fetchInitialData:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function i(){var e,a,o,s,r,h,u,l;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t.isInitialDataFetched=!1,e=t.$axios.get(t.url.worldMapData),a=t.$axios.get(t.url.covidData.countriesLatestConfirmed),o=t.$axios.get(t.url.covidData.global),i.next=7,Promise.all([e,a,o]);case 7:s=i.sent,r=Object(n.a)(s,3),h=r[0],u=r[1],l=r[2],t.worldMapData.land=c.a(h.data,h.data.objects.land),t.worldMapData.countries=c.a(h.data,h.data.objects.countries),t.covidData.countriesLatestConfirmed=u.data,t.covidData.global=l.data,t.generateDisplayData("confirmed",t.covidData.countriesLatestConfirmed),t.isInitialDataFetched=!0,i.next=23;break;case 20:i.prev=20,i.t0=i.catch(0),t.isInitialDataFetched=!1;case 23:case"end":return i.stop()}}),i,null,[[0,20]])})))()},generateDisplayData:function(t,i){var e=this;this.covidData.display.countryToCountMap={},i.forEach((function(t){e.covidData.display.countryToCountMap[t["country/region"]]=parseInt(t.data[0].count)})),this.covidData.display.minCount=parseInt(this.covidData.global[t].min.count),this.covidData.display.maxCount=parseInt(this.covidData.global[t].max.count)},adjustDimensions:function(){this.dimensions.screenWidth=document.documentElement.clientWidth,this.dimensions.screenHeight=document.documentElement.clientHeight,this.isMounted&&this.context.clearRect(0,0,this.width,this.height),this.dimensions.canvasSquareSide=Math.min(.95*this.dimensions.screenWidth-this.dimensions.canvasMargin,.7*this.dimensions.screenHeight-this.dimensions.canvasMargin)},getUniqueRGBColor:function(){var t=[];return this.nextUniqueColorSeed>16777214&&(this.nextUniqueColorSeed=1),t.push(255&this.nextUniqueColorSeed),t.push((65280&this.nextUniqueColorSeed)>>8),t.push((16711680&this.nextUniqueColorSeed)>>16),this.nextUniqueColorSeed+=5,"rgb("+t.join(",")+")"},setupEquirectangularColorKeys:function(){if(this.isMounted&&this.isInitialDataFetched)for(var t=this.worldMapData.countries.features.length;t--;){var i=this.worldMapData.countries.features[t],e=this.getUniqueRGBColor();this.colorKeyToCountryMap[e]=i,this.equirectangularContext.beginPath(),this.equirectangularPath(i),this.equirectangularContext.fillStyle=e,this.equirectangularContext.fill()}},getCountryFromEquirectangularImageData:function(t){var i=t.data,e="rgb("+i[0]+","+i[1]+","+i[2]+")";return this.colorKeyToCountryMap[e]},configureInitialProjection:function(){this.projection.scale(this.scale),this.projection.rotate([this.rotations.yaw,this.rotations.pitch,this.rotations.roll])},selectCountryFromPosition:function(t){var i=this.projection.invert(t),e=this.equirectangularProjection(i);if(e[0]>-1){var n=this.equirectangularContext.getImageData(e[0],e[1],1,1),a=this.getCountryFromEquirectangularImageData(n);if(void 0===a)this.selectedCountry=void 0;else if(void 0===this.selectedCountry||this.selectedCountry.id!==a.id){this.selectedCountry=a;var o=this.selectedCountry.properties.name.toLowerCase(),s=this.covidData.display.countryToCountMap[o];void 0!==s&&(this.selectedCountry.properties.count=s)}}},rotateFromDragEvent:function(t){var i=this.projection.rotate(),e=this.dragSensitivity/this.projection.scale();this.rotations={yaw:i[0]+t.dx*e,pitch:i[1]-t.dy*e,roll:this.rotations.roll}},getDistanceBetweenTwoPoints:function(t){return Math.sqrt(Math.pow(t[0][0]-t[1][0],2)+Math.pow(t[0][1]-t[1][1],2))},scaleFromPinchTouches:function(t){if(this.lastPinchDistance){var i=this.getDistanceBetweenTwoPoints(t);if(i===this.lastPinchDistance)return;i>this.lastPinchDistance?this.scale=Math.min(1e4,this.scale*(1+this.pinchZoomSensitivity)):this.scale=Math.max(100,this.scale*(1-this.pinchZoomSensitivity))}this.lastPinchDistance=this.getDistanceBetweenTwoPoints(t)},onMouseMove:function(){var t=r.g(r.b.target);this.selectCountryFromPosition(t)},onZoom:function(){this.scale=this.radius*r.b.transform.k},onDragStart:function(){var t=r.l(r.b.sourceEvent.target);t.length<2?(this.isRotating=!this.isRotating,this.isBeingDragged=!0):2===t.length&&(this.lastPinchDistance=this.getDistanceBetweenTwoPoints(t))},onDrag:function(){var t=r.l(r.b.sourceEvent.target);t.length<2?this.rotateFromDragEvent(r.b):2===t.length&&this.scaleFromPinchTouches(t)},onDragEnd:function(){this.isBeingDragged&&(this.isRotating=!this.isRotating,this.isBeingDragged=!1)},render:function(){var t=this;this.context.clearRect(0,0,this.width,this.height),this.context.lineWidth=1.5,this.context.fillStyle=this.colors.water,this.context.beginPath(),this.path({type:"Sphere"}),this.context.fill(),this.context.stroke(),this.context.lineWidth=.3,this.worldMapData.countries.features.forEach((function(i){var e,n=i.properties.name.toLowerCase(),a=t.covidData.display.countryToCountMap[n];if(void 0!==a){var o=t.countryColorScale(a);e="rgb(".concat(t.colors.landRed,",").concat(o,",").concat(o,")")}else e=t.colors.unavailableCountry;t.context.fillStyle=e,t.context.beginPath(),t.path(i),t.context.fill(),t.context.stroke()})),void 0!==this.selectedCountry&&(this.context.fillStyle=this.colors.selectedCountry,this.context.beginPath(),this.path(this.selectedCountry),this.context.fill())},draw:function(t){if(!this.isBeingDrawn&&this.isMounted&&this.isInitialDataFetched){this.isBeingDrawn=!0;var i=r.h(),e=i-this.lastDrawLoopCallTime;e<t&&(this.isRotating&&(this.rotations={yaw:this.rotations.yaw+=e*this.autoRotationDegPerMilliSec,pitch:this.rotations.pitch,roll:this.rotations.roll}),this.render()),this.lastDrawLoopCallTime=i,this.isBeingDrawn=!1}}}},l=e(37),d=e(42),g=e.n(d),v=e(359),p=e(307),f=e(360),D=Object(l.a)(u,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-container",[e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-col",{attrs:{align:"center"}},[t.isInitialDataFetched?t._e():e("div",[t._v("\n        Fetching Data\n        "),e("span",{staticClass:"ml-2"},[e("font-awesome-icon",{attrs:{icon:["fas","spinner"],pulse:""}})],1)])])],1),t._v(" "),e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-col",{attrs:{id:"canvasContainer",align:"center"}})],1),t._v(" "),e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-col",{attrs:{align:"center"}},[void 0!==t.selectedCountry?e("div",[e("span",[t._v(t._s(t.selectedCountry.properties.name))]),t._v(" "),void 0!==t.selectedCountry.properties.count?e("span",[t._v(": "+t._s(t.selectedCountry.properties.count))]):t._e()]):t._e()])],1)],1)}),[],!1,null,null,null),m=D.exports;g()(D,{VCol:v.a,VContainer:p.a,VRow:f.a});var C={components:{Globe:m},data:function(){return{title:"Covid Athenaeum"}},head:function(){return{title:this.title,meta:[{hid:"description",name:"description",content:"Learn about COVID-19"}]}}},y=(e(355),Object(l.a)(C,(function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("Globe")],1)}),[],!1,null,null,null));i.default=y.exports}}]);